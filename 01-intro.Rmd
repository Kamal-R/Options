# Options at Expiry 

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

if ( !require("tidyverse") )   { install.packages("tidyverse") };    require(tidyverse)
if ( !require("kableExtra") )  { install.packages("kableExtra") };   require(kableExtra)
if ( !require("ggdark") )      { install.packages("ggdark") };       require(ggdark)
if ( !require("formattable") ) { install.packages("formattable") };  require(formattable)

options(kableExtra.html.bsTable = T)
options(kableExtra.auto_format = FALSE)
```

## Options on Expiry Day
```{r Call-Demo, echo=FALSE}
Call_cost <- 5; Put_cost <- 5
Call_K <- 230; Put_K <- 180
Current_price <- 200
Future_price <- 240
```
Suppose that stock of Company XYZ is trading at `r currency(Current_price)`, and that we see the following two options available for purchase. 

1. A `r currency(Call_K)` strike call that expires in 60 days and costs `r currency(Call_cost)`.
2. A `r currency(Put_K)` strike put that expires in 60 days and costs `r currency(Put_cost)`. 

The call empowers its buyer to purchase shares of Company XYZ for `r currency(Call_K)` in 60 days. The put empowers its buyer to sell shares of Company XYZ for `r currency(Put_K)` in 60 days. After the 60th day, the option expires and is worthless. Options are available on exchanges, so people can buy and sell them before they expire to avoid having them expire for nothing. Since options pricing can get complicated, we'll only be considering the profit (or loss) a buyer can experience on the expiry date of the option in this chapter. 

## Call Options
```{r Call-Option-Payoff-Plot, echo=FALSE, out.width = "80%", fig.align = "center", message = FALSE}
Call_cost <- 5
Call_K <- 230
x_min <- 210; x_max = 250
Call_Payoff_Plot <- tibble( "Call_x" = seq(from = x_min, to = x_max, by = 1),
                            "Call_y" = -Call_cost + (Call_x > Call_K)*(Call_x-Call_K) )

ggplot() + 
  geom_line(data = Call_Payoff_Plot, aes(Call_x, Call_y, color = "Shares"), linetype = "solid") +
  geom_line(data = Call_Payoff_Plot, aes(Call_x, rep(0,length(Call_x)), color = "Breakeven"), linetype = "dashed") +
  geom_line(data = Call_Payoff_Plot, aes(x = Call_K + Call_cost, 
                                         y = seq(from = -Call_cost, to = x_max-Call_K, length=length(Call_x)), 
                                         color = "Breakeven"),
                                         linetype = "dashed") +
  scale_y_continuous(label = scales::dollar) +
  scale_x_continuous(label = scales::dollar) + 
  labs(title = "Payoff Of The XYZ Call On Expiry",
       x = "Stock Price",
       y = "Profit Per Share") +
  scale_color_manual(values = c('Shares'='white','Breakeven'='white','Breakeven'='white'),
                     labels = c("Profit Per Share",
                                paste0("Breakeven Price = $", Call_K + Call_cost),
                                paste0("Breakeven Price = $", Call_K + Call_cost) ),
                     guide = "legend") + 
  guides(color = guide_legend(override.aes = list(linetype = c("solid", "dashed")))) + 
  theme_classic() + 
  dark_mode() + 
  theme(plot.title = element_text(hjust = 0.5, face="bold", margin = margin(10, 0, 10, 0)),
        legend.justification=c(0,1), 
        legend.position=c(0,1), 
        legend.title = element_blank(),
        legend.key=element_rect(fill="black"),
        text = element_text(size=16), 
        panel.border = element_blank(), 
        panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(), 
        panel.background = element_blank(),
        axis.line = element_line(colour = "black"),
        axis.title.x = element_text(margin = unit(c(4, 0, 0, 0), "mm")),
        axis.title.y = element_text(margin = unit(c(0, 4, 0, 0), "mm"), angle = 90)) 

# plot(x = Call_x, y = -option_cost + (Call_x > Call_K)*(Call_x-Call_K),
#      type = 'l', lwd = 3,
#      xlab = "Stock Price", ylab = "Profit Per Share",
#      main = "Payoff Of The Call Option On Expiry")
# abline(v = Call_K + option_cost, lty = 2, lwd = 1)
# abline(h = 0, lty = 2, lwd = 1)
# legend("topleft", c("Profit Per Share",
#                     paste0("Breakeven Price = $", Call_K + option_cost)),
#        lty = c("solid", "dotdash"), 
#        lwd = c(2, 2), cex = 0.75,
#        col=c("black", "black"), bty = "n") 

```

We'll use payoff diagrams to help visualize options. Payoff diagrams show how much money an investment makes at different prices of Company XYZ's shares. Our first payoff diagram shows the profit or loss of a call with a `r currency(Call_K)` strike that costs `r currency(Call_cost)` on its expiry date. Reading payoff diagrams is not too bad - suppose the shares are worth `r currency(Future_price)` at expiry. The buyer can use the call to purchase shares for `r currency(Call_K)` and immediately sell them for `r currency(Future_price)` This is a gain of `r currency(Future_price)` - `r currency(Call_K)` = `r currency(Future_price-Call_K)` per share. Remembering that he paid `r currency(Call_cost)` for the call, the buyer's profits are `r currency(Future_price-Call_K)` - `r currency(Call_cost)` = `r currency(Future_price-Call_K-Call_cost)` per share. If we look at the payoff diagram, the buyer's profit when the stock is at `r currency(Future_price)` is indeed `r currency(Future_price-Call_K-Call_cost)`. 

There are a couple more things on the payoff diagram we should make note of. The first is that even though the call lets the buyer purchase shares for `r currency(Call_K)`, he doesn't start making money until they reach `r currency(Call_K+Call_cost)` because he has to make back the `r currency(Call_cost)` he spent buying the option. `r currency(Call_K+Call_cost)` is such an important value that it has its own name - it's the breakeven price. The second is that the most the buyer can lose is the `r currency(Call_cost)` he spent buying the call. If the shares are `r currency(Call_K-30)`, `r currency(Call_K-50)`, or even `r currency(Call_K-Call_K)`, the buyer can just let the call expire and can never lose more than the `r currency(Call_cost)` he spent on the call. This places a hard limit on the amount of money the buyer can lose, regardless of what happens to Apple's shares. We'll come back to this idea of having limited downside again and again while trying to understand how to use options The third is that even with limited downside, the buyer still gets dollar for dollar participation in the upside of the stock on the expiry date of the call (after recovering the `r currency(Call_cost)` it cost to buy). 

This combination of limited downside and full participation to the upside is what makes options such a powerful tool to have in your investing toolkit. But we don't get this power for free. The day after the option expires, it becomes worthless. In exchange for giving us limited downside and full participation to the upside, the option puts us on the clock. We need the price to move in our favor before the option expires to make money. Lots of options investing strategies try to mitigate the (very negative) impact this clock can have on options investments, and we'll discuss some of them in a later chapter. For now, we want to focus on the big ideas, which are: having limited downside, having full participation to the upside, and being time-limited.

Let's recap the decisions that a buyer of a call option could make at different prices of Company XYZ's stock. If the stock is below the strike price of `r currency(Call_K)` on the expiry date of the call, the buyer will not exercise the call. If he did, he would be buying the shares for more than they are worth on the market, and he would not make any money. If the stock is above `r currency(Call_K)` on expiry, he will exercise the call because he is buying shares for less than they are worth on the market and can immediately sell them at the higher market price. However, the buyer only makes profits after recovering the `r currency(Call_cost)` cost of the call. If the shares are between `r currency(Call_K)` and `r currency(Call_K+Call_cost)`, he is recovering some of the cost of the call, but still losing money. If the shares are above `r currency(Call_K+Call_cost)`, he will profit from the call. 

The payoff diagram summarizes all of this information, and helps us see the price levels that go along with these decisions very quickly. This makes drawing payoff diagrams is one of the easiest and most effective ways that we can use to help ourselves understand how to trade options. While we won't draw the payoff diagram for every option strategy we talk about in this book, everything will make much more sense if you draw the missing payoff diagrams before reading the discussions on them. 

## Put Options
```{r Put-Demo, echo=FALSE}
Call_cost <- 5; Put_cost <- 5
Call_K <- 230; Put_K <- 180
Future_price <- 150
```

Puts are a little strange if you haven't seen them before. Instead of giving their buyer the option to buy shares at a specific price, they give the buyer the option to sell shares at a specific price. This is the opposite of how we're used to thinkng, so don't worry if it doesn't click right away. 

We're looking at a put with a `r currency(Put_K)` strike that cost `r currency(Put_cost)`. This put gives its buyer the option to sell shares of Company XYZ for `r currency(Put_K)` on its expiry date. The buyer makes money if the stock is below `r currency(Put_K)`. As an example, suppose the shares are trading at `r currency(Future_price)` on the put's expiry date. Then, the buyer can purchase them for `r currency(Future_price)` and sell them for `r currency(Put_K)`, for an instant gain of `r currency(Put_K-Future_price)`. Remembering that the put cost `r currency(Put_cost)`, he is left with a profit of `r currency(Put_K-Future_price-Put_cost)`. Looking at the payoff diagram, the buyer does indeed profit by `r currency(Put_K-Future_price-Put_cost)` per share when the shares are at `r currency(Future_price)`. 


```{r Put-Option-Payoff-Plot, echo=FALSE, out.width = "80%", fig.align = "center", message = FALSE}
Put_cost <- 5
Put_K <- 180
x_min <- 150; x_max = 200

Call_Payoff_Plot <- tibble( "Put_x" = seq(from = x_min, to = x_max, by = 1),
                            "Put_y" = -Put_cost - (Put_x < Put_K) * (Put_x - Put_K)  )

ggplot() + 
  geom_line(data = Call_Payoff_Plot, aes(Put_x, Put_y, color = "Shares"), linetype = "solid") +
  geom_line(data = Call_Payoff_Plot, aes(Put_x, rep(0,length(Put_x)), color = "Breakeven"), linetype = "dashed") +
  geom_line(data = Call_Payoff_Plot, aes(x = Put_K - Put_cost, 
                                         y = seq(from = -Put_cost, to = x_max-Put_K, length=length(Put_x)), 
                                         color = "Breakeven"),
                                         linetype = "dashed") +
  scale_y_continuous(label = scales::dollar) +
  scale_x_continuous(label = scales::dollar) + 
  labs(title = "Payoff Of The XYZ Put Option On Expiry",
       x = "Stock Price",
       y = "Profit Per Share") +
  scale_color_manual(values = c('Shares'='white','Breakeven'='white','Breakeven'='white'),
                     labels = c("Profit Per Share",
                                paste0("Breakeven Price = $", Put_K - Put_cost),
                                paste0("Breakeven Price = $", Put_K - Put_cost) ),
                     guide = "legend") + 
  guides(color = guide_legend(override.aes = list(linetype = c("solid", "dashed")))) + 
  theme_classic() + 
  dark_mode() + 
  theme(plot.title = element_text(hjust = 0.5, face="bold", margin = margin(10, 0, 10, 0)),
        legend.justification=c(0,1), 
        legend.position=c(0,1), 
        legend.title = element_blank(),
        legend.key=element_rect(fill="black"),
        text = element_text(size=16), 
        panel.border = element_blank(), 
        panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(), 
        panel.background = element_blank(),
        axis.line = element_line(colour = "black"),
        axis.title.x = element_text(margin = unit(c(4, 0, 0, 0), "mm")),
        axis.title.y = element_text(margin = unit(c(0, 4, 0, 0), "mm"), angle = 90)) 

# plot(x = Put_x, y = -option_cost - (Put_x < Put_K) * (Put_x - Put_K), 
#      type = 'l', lwd = 3,
#      xlab = "Stock Price", ylab = "Profit per Share",
#      main = "Payoff of The Put Option On Expiry")
# 
# abline(v = Put_K - option_cost, lty = 2, lwd = 1)
# abline(h = 0, lty = 2, lwd = 1)
# 
# legend("topright", c("Profit Per Share",
#                     paste0("Breakeven Price = $", Put_K - option_cost)),
#        lty = c("solid", "dotdash"), 
#        lwd = c(2, 2), cex = 0.75,
#        col=c("black", "black"), bty = "n") 

```     

The breakeven of the put is `r currency(Put_K-Put_cost)`, because the buyer needs the shares to fall by `r paste0(Put_cost)` to recover the cost of the put. Similar to calls, the downside of a put is limited to its cost and they are time-limited (they have an expiry date). Unlike calls, their dollar-for-dollar "upside" participation happens when the stock they're following goes down. This is the big idea behind puts - they make money when prices go down. This idea opens up so many new investing strategies to us that the rest of this book is devoted to working through some of them. The big picture idea is that mixing and matching puts, calls, and shares lets us control how much our portfolio goes up (or down) when market prices go up. We'll come back to this idea every time we're going through an options strategy and working through how we can use it to help us construct risk-managed investments.



## Apple: Calls and Puts

Let’s look at options on Apple stock around 11:00am on August 28, 2019. Apple has options listed for a bunch of different dates: September 20, 2019, October 18, 2019, November 15, 2019, December 20, 2019, January 17, 2020 and so on. These are expiry dates - the last day a buyer can exercise their right to buy/sell a stock at the strike. Options on stocks are almost always for 100 shares - calls let their buyer purchase 100 shares at the strike, and puts let their buyer sell 100 shares at the strike. 

```{r Apple-205-Option-Price, echo = FALSE}
Current_price <- 205.44
Call_K <- 205
Put_K <- 205
Call_cost <- 6.84
Put_cost <- 6.10
```

Apple is trading at `r currency(Current_price)`. The September 20, 2019 call with a `r currency(Call_K)` strike lets its buyer purchase 100 shares of Apple for `r currency(Call_K)` each on September 20, 2019. It is trading for `r currency(100*Call_cost)` - the buyer is paying <span class = "fraction" data-top="`r currency(100*Call_cost)`" data-bottom="100"></span> = `r currency(Call_cost)` per share for this call. The September 20, 2019 put lets its buyer sell 100 shares of Apple for `r currency(Current_price)` each on September 20, 2019. It is trading for `r currency(100*Put_cost)` - the buyer is paying <span class = "fraction" data-top="`r currency(100*Put_cost)`" data-bottom="100"></span> = `r currency(Put_cost)` per share. 

```{r Apple-Call-Option_Payoff, echo=FALSE, out.width = "80%", fig.align = "center", message = FALSE}
Call_cost <- 6.84
Call_K <- 205
Current_price <- 205.44
x_min = 180; x_max = 225
Call_x <- seq(from = x_min, to = x_max, by = 1)

Call_Payoff_Plot <- tibble( "Call_x" = currency(seq(from = x_min, to = x_max, by = 1)),
                            "Call_y" = currency(-Call_cost + (Call_x > Call_K)*(Call_x-Call_K)) )

ggplot() + 
  geom_line(data = Call_Payoff_Plot, aes(Call_x, Call_y, color = "Shares"), linetype = "solid") +
  geom_line(data = Call_Payoff_Plot, aes(Call_x, rep(0,length(Call_x)), color = "Breakeven"), linetype = "dashed") +
  geom_line(data = Call_Payoff_Plot, aes(x = Call_K + Call_cost, 
                                         y = seq(from = -Call_cost, to = x_max-Call_K, length=length(Call_x)), 
                                         color = "Breakeven"),
                                         linetype = "dashed") +
  scale_y_continuous(label = scales::dollar) +
  scale_x_continuous(label = scales::dollar) + 
  labs(title = "Payoff Of The XYZ Call Option On Expiry",
       x = "Stock Price",
       y = "Profit Per Share") +
  scale_color_manual(values = c('Shares'='white','Breakeven'='white','Breakeven'='white'),
                     labels = c("Profit Per Share",
                                paste0("Breakeven Price = ", currency(Call_K + Call_cost)),
                                paste0("Breakeven Price = ", currency(Call_K + Call_cost)) ),
                     guide = "legend") + 
  guides(color = guide_legend(override.aes = list(linetype = c("solid", "dashed")))) + 
  theme_classic() + 
  dark_mode() + 
  theme(plot.title = element_text(hjust = 0.5, face="bold",
                                  margin = margin(10, 0, 10, 0)),
        legend.justification=c(0,1), 
        legend.position=c(0,1), 
        legend.title = element_blank(),
        legend.key=element_rect(fill="black"),
        text = element_text(size=16), 
        panel.border = element_blank(), 
        panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(), 
        panel.background = element_blank(),
        axis.line = element_line(colour = "black"),
        axis.title.x = element_text(margin = unit(c(4, 0, 0, 0), "mm")),
        axis.title.y = element_text(margin = unit(c(0, 4, 0, 0), "mm"), 
                                    angle = 90)) 

# plot(x = Call_x, y = -Call_cost + (Call_x > Call_K)*(Call_x-Call_K), 
#      type = 'l', lwd = 3,
#      xlab = "Apple's Stock Price", ylab = "Profit Per Share",
#      main = "Payoff Of The Call Option On Expiry")
# abline(v = Call_K + option_cost, lty = 2, lwd = 1)
# abline(h = 0, lty = 2, lwd = 1)
# legend("topleft", c("Profit Per Share",
#                     paste0("Breakeven Price = $", Call_K + Call_cost)),
#        lty = c("solid", "dotdash"), 
#        lwd = c(2, 2), cex = 0.75,
#        col=c("black", "black"), bty = "n") 
```

Here's a payoff diagram of this call option. Below `r currency(Call_K)`, the buyer loses `r currency(Call_cost)` per share, which is what he paid for the call. This is the entire cost of the call, since it expires worthless. Since he paid `r currency(Call_cost)` per share for the call, he has to make `r currency(Call_cost)` back before he becomes profitable. Therefore, his breakeven is `r currency(Call_K)` + `r currency(Call_cost)` = `r currency(Call_cost+Call_K)`. This is reflected in the payoff diagram, where his profits are negative when the stock is below `r currency(Call_cost+Call_K)` and positive when it is above `r currency(Call_cost+Call_K)`.

This next table compares how much money a buyer can make with 100 shares of Apple at `r currency(Current_price)` and 1 call on Apple shares at `r currency(Call_cost)` (with a strike price of `r currency(Call_K)` that expires on September 20, 2019). The relative return column tell us how much the call owner participates in the upside (or downside) experienced by the shareholder. This last column is the most important - it will help us understand how to size our option investments. To give the dollar amounts some context, 100 shares of Apple at `r currency(Current_price)` will cost `r currency(Current_price)` x 100 = `r currency(100*Current_price)` to buy, and one call that gives the buyer the option to buy 100 shares of Apple at `r currency(Call_K)` on September 20, 2019 will cost `r currency(Call_cost)` x 100 = `r currency(100*Call_cost)`.

``` {r Apple-Call-Table, echo = FALSE, tab = NULL}
Apple_Current_Price <- 205.44
Apple_Call_K <- 205
Apple_Call_Cost <- 6.84
Apple_Stock_Prices <- c( 150, 180, 184.90, 198.90, 211.84, 218.68, 225.98, 240 )

Apple_Shares_Percent_Return <- (Apple_Stock_Prices - Apple_Current_Price) / Apple_Current_Price
Apple_Shares_Dollar_Return <- 100 * (Apple_Stock_Prices - Apple_Current_Price)

Apple_Calls_Percent_Return <- 
  ( pmax( 0, (Apple_Stock_Prices - Apple_Call_K ) ) - Apple_Call_Cost ) / Apple_Call_Cost 
Apple_Calls_Dollar_Return <- 100  * ( pmax( 0, (Apple_Stock_Prices - Apple_Call_K ) ) - Apple_Call_Cost )
  
Apple_Call_Table <- tibble( "Stock Price" = currency(Apple_Stock_Prices),
                            "Percent Return " = percent(Apple_Shares_Percent_Return),
                            "Dollar Return " = scales::dollar(Apple_Shares_Dollar_Return, negative_parens = TRUE), 
                            " Percent Return" = percent(Apple_Calls_Percent_Return),
                            " Dollar Return" =  scales::dollar(Apple_Calls_Dollar_Return, negative_parens = TRUE), 
                            "Calls/Shares" = sign(Apple_Calls_Dollar_Return) * 
                              percent(Apple_Calls_Dollar_Return / Apple_Shares_Dollar_Return ) )

add_header_above( kable_styling( knitr::kable(x = Apple_Call_Table, booktabs = T,
                                              caption = "Returns when Investing in 100 Shares or 1 Call"), 
                                             bootstrap_options = c("bordered", "condensed", "responsive"),
                                             latex_options = c("striped"),
                                             full_width = FALSE ),
                 c("Stock" = 1, "If We Own 100 Shares" = 2, "If We Own 1 Call" = 2, "Relative Return" = 1) )
```
The buyer can make a ton of money with this call. To double his investment, he only needs to recover the `r currency(Apple_Call_Cost)` it cost to buy the call (done at the breakeven of `r currency(Apple_Call_K)` + `r currency(Apple_Call_Cost)` = `r currency(Apple_Call_K+Apple_Call_Cost)`), and have the shares go up another `r currency(Apple_Call_Cost)` to `r currency(Apple_Call_K+Apple_Call_Cost)` + `r currency(Apple_Call_Cost)` = `r currency(Apple_Call_K+2*Apple_Call_Cost)`. Remember that Apple was trading for `r currency(Apple_Current_Price)` when he bought the call. If he bought shares instead, the buyer would make <span class = "fraction" data-top="`r currency(Apple_Call_K+2*Apple_Call_Cost)` - `r currency(Apple_Current_Price)`" data-bottom = "`r currency(Apple_Current_Price)`"></span> = `r percent(2*Apple_Call_Cost/Apple_Current_Price)` on his investment. By using calls, he makes <span class = "fraction" data-top="`r currency(Apple_Call_K+2*Apple_Call_Cost)` - `r currency(Apple_Call_K)` - `r currency(Apple_Call_Cost)`" data-bottom = "`r currency(Apple_Call_Cost)`"></span> = `r percent(Apple_Call_Cost/Apple_Call_Cost)`. `r percent(Apple_Call_Cost/Apple_Call_Cost)` is so much larger than `r percent(2*Apple_Call_Cost/Apple_Current_Price)` that this seems impossible, but the way to think about this is by looking at how much of the upside in the stock the call buyer participates in. 

Calls also limit the buyer's maximum loss to the cost of the call. The most he can lose is the `r currency(Apple_Call_Cost)` he paid for it. If he bought shares of Apple for `r currency(Apple_Current_Price)`, it would have to fall to `r currency(Apple_Current_Price - Apple_Call_Cost)` (`r currency(Apple_Current_Price)` - `r currency(Apple_Call_Cost)` = `r currency(Apple_Current_Price - Apple_Call_Cost)`) for the buyer to lose the same `r currency(Apple_Call_Cost)` per share. That’s a small <span class = "fraction" data-top="`r currency(Apple_Current_Price)` - `r currency(Apple_Call_Cost)`" data-bottom="`r currency(Apple_Current_Price)`"></span> = 3.33\% decline in a bit under 30 days, which could very possibly happen. Now, if Apple falls to `r currency(Apple_Stock_Prices[2])`, the call buyer still only loses `r currency(Apple_Call_Cost)` per share. Someone who had bought shares would lose `r currency(Apple_Current_Price)` - `r currency(Apple_Stock_Prices[2])` = `r currency(Apple_Current_Price - Apple_Stock_Prices[2])` per share, which is almost four times as much. If the shares fall to `r currency(Apple_Stock_Prices[2])`, the shareholder loses almost seven times as much.

The takeaway here is that the call gives dollar-for-dollar participation to the upside if we hold the option to its expiry date. It has two drawbacks - we have to recover the cost of the call, and it puts a clock on our participation. We'll discuss ways to navigate that the time constraint later. Having to pay for the cost of the call means we lose money below the breakeven of `r currency(Apple_Call_K+Apple_Call_Cost)`, while the shareholder only loses money below `r currency(Apple_Current_Price)`. This is because the shares have to go up by enough to offset the cost of the call, or the call buyer can lose money even when the shareholder does not. 

Even with these two drawbacks, a call still limits an investor's downside compared to owning shares and gives good participation to the upside. This is the picture painted by the payoff diagram - the most we can lose is the cost of the call, and we participate dollar for dollar in the upside of the stock (after reclaiming the cost of the call). This payoff profle comes at a cost - the call expires, but the shares do not. If we own shares that are down, we can continue holding them and hope for a rebound at the risk of potentially losing more money. With the call, the most we can lose is its cost but we have to contend with expiry dates. When we start discussing options investing strategies, we'll see how this means we will have to think about which expiry date we want, how to adjust to an earlier or later expiry date if our opinion changes during the trade, and so on. 

```{r Apple-Put-Option-Payoff, echo=FALSE, out.width = "80%", fig.align = "center", message = FALSE}
Apple_Put_Cost <- 6.10
Apple_Put_K <- 205
x_min = 180; x_max = 230
Put_x <- seq(from = 180, to = 230, by = 1)
Put_y <- -Put_cost - (Put_x < Put_K) * (Put_x - Put_K)
  
Put_Payoff_Plot <- tibble( "Put_x" <- currency(seq(from = x_min, to = x_max, by = 1)),
                           "Put_y" = currency(-Put_cost - (Put_x < Apple_Put_K) * (Put_x - Apple_Put_K)) )


ggplot() + 
  geom_line(data = Put_Payoff_Plot, aes(Put_x, Put_y, color = "Shares"), linetype = "solid") +
  geom_line(data = Put_Payoff_Plot, aes(Put_x, rep(0,length(Put_x)), color = "Breakeven"), linetype = "dashed") +
  geom_line(data = Put_Payoff_Plot, aes(x = Apple_Put_K - Apple_Put_Cost, 
                                         y = seq(from = -Apple_Put_Cost, to = x_max-Apple_Put_K,
                                                 length = length(Put_x)), 
                                         color = "Breakeven"),
                                         linetype = "dashed") +
  scale_y_continuous(label = scales::dollar) +
  scale_x_continuous(label = scales::dollar) + 
  labs(title = "Payoff Of Apple's Put On Expiry",
       x = "Stock Price",
       y = "Profit Per Share") +
  scale_color_manual(values = c('Shares'='white','Breakeven'='white','Breakeven'='white'),
                     labels = c("Profit Per Share",
                                paste0("Breakeven Price = ", currency(Apple_Put_K - Apple_Put_Cost)),
                                paste0("Breakeven Price = ", currency(Apple_Put_K - Apple_Put_Cost)) ),
                     guide = "legend") + 
  guides(color = guide_legend(override.aes = list(linetype = c("solid", "dashed")))) + 
  theme_classic() + 
  dark_mode() + 
  theme(plot.title = element_text(hjust = 0.5, face="bold", 
                                  margin = margin(10, 0, 10, 0)),
        legend.justification=c(0,1), 
        legend.position=c(0,1), 
        legend.title = element_blank(),
        legend.key=element_rect(fill="black"),
        text = element_text(size=16), 
        panel.border = element_blank(), 
        panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(), 
        panel.background = element_blank(),
        axis.line = element_line(colour = "black"),
        axis.title.x = element_text(margin = unit(c(4, 0, 0, 0), "mm")),
        axis.title.y = element_text(margin = unit(c(0, 4, 0, 0), "mm"), 
                                    angle = 90)) 

# plot(x = Put_x, y = -option_cost - (Put_x < Put_K) * (Put_x - Put_K), 
#      type = 'l', lwd = 3,
#      xlab = "Apple's Price", ylab = "Profit per Share",
#      main = "Payoff of The Put Option On Expiry")
# abline(v = Put_K - option_cost, lty = 2, lwd = 1)
# abline(h = 0, lty = 2, lwd = 1)
# legend("topright", c("Profit Per Share",
#                     paste0("Breakeven Price = $", Put_K - option_cost)),
#        lty = c("solid", "dotdash"), 
#        lwd = c(2, 2), cex = 0.75,
#        col=c("black", "black"), bty = "n") 
```     
This put give its buyer the option to sell shares of Apple at `r currency(Apple_Put_K)` on September 20, 2019. That means if Apple's shares are below `r currency(Apple_Put_K)` on that day, the put buyer makes money. When the shares are above `r currency(Apple_Put_K)`, the put buyer has lost the entire \$6.10 per share that he spent buying the put. If the shares are below `r currency(Apple_Put_K)`, the buyer must recover the cost of his put (done at `r currency(Apple_Put_K)` - `r currency(Apple_Put_Cost)` = `r currency(Apple_Put_K-Apple_Put_Cost)`). Once Apple's shares are below `r currency(Apple_Put_K-Apple_Put_Cost)`, the put buyer partcipates dollar for dollar in the downside of the stock, which is the upside of the put.

The put has the same, or potentially even better, characteristics as the call. It gives limited downside to the buyer of the put, as their maximum loss is limited to the price they paid for the put. It also provides dollar for dollar participation to the downside of the stock. This corresponds to the upside of the put. We'll use this ability to make money when prices are going down many times when discussing different ways to use options to construct investment portfolios.

```{r Apple-Put-Table, echo = FALSE}
Apple_Current_Price <- 205.44
Apple_Put_K <- 205
Apple_Put_Cost <- 6.10
Apple_Stock_Prices <- c( 150, 180, 184.90, 198.90, 211.84, 218.68, 225.98, 240 )

Apple_Shares_Percent_Return <- (Apple_Stock_Prices - Apple_Current_Price) / Apple_Current_Price
Apple_Shares_Dollar_Return <- 100 * (Apple_Stock_Prices - Apple_Current_Price)

Apple_Puts_Percent_Return <- 
  ( pmax( 0, (Apple_Put_K - Apple_Stock_Prices) ) - Apple_Put_Cost ) / Apple_Put_Cost 
  
Apple_Puts_Dollar_Return <- 100  * ( pmax( 0, (Apple_Put_K - Apple_Stock_Prices ) ) - Apple_Put_Cost )

Apple_Put_Table <- tibble( "Stock Price" = currency(Apple_Stock_Prices),
                           "Percent Return " = percent(Apple_Shares_Percent_Return),
                           "Dollar Return " = scales::dollar(Apple_Shares_Dollar_Return, negative_parens = TRUE), 
                           " Percent Return" = percent(Apple_Puts_Percent_Return),
                           " Dollar Return" =  scales::dollar(Apple_Puts_Dollar_Return, negative_parens = TRUE), 
                           "Puts/Shares" = sign(Apple_Puts_Dollar_Return) * 
                             percent(Apple_Puts_Dollar_Return / Apple_Shares_Dollar_Return ) )

add_header_above( kable_styling( knitr::kable(x = Apple_Put_Table, booktabs = T, 
                                              caption = "Returns when Investing in 100 Shares or 1 Put"), 
                                             bootstrap_options = c("bordered", "condensed", "responsive"),
                                             full_width = FALSE ),
                 c("Stock" = 1, "If We Own 100 Shares" = 2, "If We Own 1 Put" = 2, "Relative Return" = 1) )
```

For now, let’s look at how owning Apple stock compares to holding the put to expiry. If Apple’s stock increases by 10% (from `r currency(Apple_Current_Price)` to `r currency(1.10*Apple_Current_Price)`), a shareholder will make `r currency(1.10*Apple_Current_Price)` - `r currency(Apple_Current_Price)` = `r currency(1.10*Apple_Current_Price-Apple_Current_Price)` per share. If Apple’s stock declines 10\% (from `r currency(Apple_Current_Price)` to `r currency(0.90*Apple_Current_Price)`), a shareholder loses `r currency(0.90*Apple_Current_Price)` - `r currency(Apple_Current_Price)` = `r -currency(0.90*Apple_Current_Price-Apple_Current_Price)` per share. Now, let’s look at the put. It costs `r currency(Apple_Put_Cost)` per share, so if Apple’s shares stay above `r currency(Apple_Put_K)`, the put buyer loses `r currency(Apple_Put_Cost)` per share. If Apple’s stock falls to `r currency(0.90*Apple_Current_Price)`, the put buyer makes `r currency(Apple_Put_K)` - `r currency(0.90*Apple_Current_Price)` - `r currency(Apple_Put_Cost)` = `r currency(Apple_Put_K-0.90*Apple_Current_Price-Apple_Put_Cost)` per share, which is <span class = "fraction" data-top="`r currency(Apple_Put_K-0.90*Apple_Current_Price-Apple_Put_Cost)`" data-bottom="`r currency(Apple_Put_Cost)`"></span> = `r round( (Apple_Put_K-0.90*Apple_Current_Price-Apple_Put_Cost)/Apple_Put_Cost,2 )` times his orginal investment of `r currency(Apple_Put_Cost)` in the puts. This number may seem too big to be true but once again, the way to think about it is through how much participation a put gives it buyer to the downside of a stock (which is the upside of the put). 

The put buyer loses `r currency(100*Apple_Put_Cost)` whenever the shares are above `r currency(Apple_Put_K)` while the shareholder makes between 3.12\% to 16.82\%. When the shares are below the put buyer's breakeven of `r currency(Apple_Put_K-Apple_Put_Cost)`, the put buyer makes money when the shareholder loses money. When the shares are at `r currency(0.90*Apple_Current_Price)`, the put buyer captures 68.16\% of the downside of the stock. When the shares are at `r currency(Apple_Stock_Prices[2])`, the put buyer captures 74.29\%; when the shares are `r currency(Apple_Stock_Prices[1])`, the put buyer captures 88.20\%. This percentage gradually increases because the put buyer must recover the cost of buying the put before he can begin to earn profits.

Much like the call, the put gives its buyer limited downside and strong upside participation. It also gives its buyer a way to make money when prices are falling, a magical property that we will use again and again when constructing investment portfolios. 



## Apple: Different Strikes 
```{r Apple-Different-Strikes, echo = FALSE}
Apple_Prices_K <- c(145, 180, 205, 230)
Apple_Call_Costs <- c(78.45, 44.85, 23.63, 8.50)
Apple_Put_Costs <- c(0.32, 1.69, 5.45, 15.30)

Apple_Current_Price <- 222.76
Apple_Future_Prices <- c(150, 200, 220, 245, 300)
```

In the first example, we considered possible profits or losses when holding `r currency(Apple_Call_K)` strike options to their expiry date of September 20, 2019. There is nothing special about `r currency(Apple_Call_K)` or September 20, 2019. Many other strike prices and expiry dates are available. For the next example, we'll choose an expiry date of December 20, 2019 and consider the profit or loss for calls with strike prices of `r currency(Apple_Prices_K[1])`, `r currency(Apple_Prices_K[2])`, `r currency(Apple_Prices_K[3])`, and `r currency(Apple_Prices_K[4])`. On September 11, 2019, one share of Apple was trading at `r currency(Apple_Current_Price)` and its options prices are listed below.

```{r Apple-Different-Strikes-Table, echo = FALSE}
Apple_Different_Strikes <- tibble( "Strike Prices" = currency(Apple_Prices_K),
                                   "1 Call" = currency(Apple_Call_Costs),
                                   "1 Put" = currency(Apple_Put_Costs) ) 

kable_styling( knitr::kable(Apple_Different_Strikes, 
                            caption = "Cost on Sept. 11, 2019"), 
               bootstrap_options = c("striped", "hover", "responsive"),
               full_width = FALSE )
```

To keep the discussion simple, we’ll continue to focus on the price of the option on its expiry date. Remember, one call lets its buyer purchase 100 shares of Apple at its strike price, and one put lets its buyer sell 100 shares at its strike price. Let’s compare the dollar return of each call option to owning 100 shares if, on December 20, 2019, Apple's shares:

1. Drop a lot to `r currency(Apple_Future_Prices[1])` .
2. Drop a little to `r currency(Apple_Future_Prices[2])`.
3. Stay roughly the same at `r currency(Apple_Future_Prices[3])`.
4. Increase a little to `r currency(Apple_Future_Prices[4])`.
5. Increase a lot to `r currency(Apple_Future_Prices[5])`.

```{r Apple-Different-Strikes-Call-Payoff, echo = FALSE}
Apple_Different_Strikes_Call_Payoff <- tibble( "Share Price" = Apple_Future_Prices,
                                               "100 Shares" = scales::dollar(100 * (Apple_Future_Prices - Apple_Current_Price),
                                                                             negative_parens = TRUE), 
                                               "1 $145 Strike Call" =  
                                                 scales::dollar( 100 * ( pmax( 0, Apple_Future_Prices - Apple_Prices_K[1] ) -
                                                                   Apple_Call_Costs[1] ), negative_parens = TRUE ),
                                               "1 $180 Strike Call" = 
                                                 scales::dollar( 100 * ( pmax(0, Apple_Future_Prices - Apple_Prices_K[2] ) -
                                                                   Apple_Call_Costs[2] ), negative_parens = TRUE ),
                                               "1 $205 Strike Call" = 
                                                 scales::dollar( 100 * ( pmax( 0, Apple_Future_Prices - Apple_Prices_K[3] ) -
                                                                   Apple_Call_Costs[3] ), negative_parens = TRUE ),
                                               "1 $230 Strike Call" = 
                                                 scales::dollar( 100 * ( pmax( 0, Apple_Future_Prices - Apple_Prices_K[4] ) -
                                                                   Apple_Call_Costs[4] ), negative_parens = TRUE ) )

kable_styling( knitr::kable(Apple_Different_Strikes_Call_Payoff, 
                            caption = "Dollar Return if Held to Expiry"), 
               bootstrap_options = c("striped", "hover", "responsive"),
               full_width = FALSE )
```

To give these dollar returns some context, buying

1. 100 shares costs `r currency(Apple_Current_Price)` x 100 = `r currency(100 * Apple_Current_Price)`
2. 1 `r currency(Apple_Prices_K[1])` strike call costs `r currency(Apple_Call_Costs[1])` x 100 = `r currency(100 * Apple_Call_Costs[1])`
3. 1 `r currency(Apple_Prices_K[2])` strike call costs `r currency(Apple_Call_Costs[2])` x 100 = `r currency(100 * Apple_Call_Costs[2])`
4. 1 `r currency(Apple_Prices_K[3])` strike call costs `r currency(Apple_Call_Costs[3])` x 100 = `r currency(100 * Apple_Call_Costs[3])`
5. 1 `r currency(Apple_Prices_K[4])` strike call costs `r currency(Apple_Call_Costs[4])` x 100 = `r currency(100 * Apple_Call_Costs[4])`


The first thing to do when trying to make sense of option profit and loss numbers is draw to payoff diagrams. I'm only going to include a diagram for the `r currency(Apple_Prices_K[3])` strike call here, but please take a minute to draw the other payoff diagrams yourself. Trying to read ahead without them is dangerous - it might make turn the next few paragraphs an incomprehensible list of numbers.

The `r currency(Apple_Prices_K[4])` strike call (the right-most column in the table) has the simplest profit and loss numbers. Even without a payoff diagram, just having the breakeven price in mind can help make sense of its column in the table below. The breakeven of this call is `r currency(Apple_Prices_K[4])` + `r currency(Apple_Call_Costs[4])` = `r currency(Apple_Prices_K[4]+Apple_Call_Costs[4])`. It costs `r currency(100*Apple_Call_Costs[4])` and expires worthless if Apple's shares are less than `r currency(Apple_Prices_K[4])` on December 20, 2019. If Apple's shares are at `r currency(Apple_Future_Prices[4])`, the call buyer makes `r currency(Apple_Future_Prices[4])` - `r currency(Apple_Prices_K[4])` - `r currency(Apple_Call_Costs[4])` = `r currency(Apple_Future_Prices[4] - Apple_Prices_K[4] - Apple_Call_Costs[4])` per share, or `r 100 * currency(Apple_Future_Prices[4] - Apple_Prices_K[4] - Apple_Call_Costs[4])` per call. If Apple's shares are at `r currency(Apple_Future_Prices[5])`, the call buyer makes `r currency(Apple_Future_Prices[5])`  - `r currency(Apple_Prices_K[4])` - `r currency(Apple_Call_Costs[4])` = `r currency(Apple_Future_Prices[5] - Apple_Prices_K[4] - Apple_Call_Costs[4])` per share, or `r 100 * currency(Apple_Future_Prices[5] - Apple_Prices_K[4] - Apple_Call_Costs[4])` per call. Those are indeed the profit and loss numbers in the table up above. 

```{r Apple_205_Strike, echo = FALSE, out.width = "80%", fig.align = "center", message = FALSE}
Call_Cost <- Apple_Call_Costs[3]
Call_K <- Apple_Prices_K[3]
x_min <- 190; x_max = 260 

Call_x <- seq(from = x_min, to = x_max, by = 1)
Call_y <- -Call_Cost + (Call_x > Call_K) * (Call_x - Call_K)
Call_Payoff_Plot <- tibble( "Call_x" = currency(seq(from = x_min, to = x_max, by = 1)),
                            "Call_y" = currency(-Call_Cost + (Call_x > Call_K) * (Call_x - Call_K)) )

ggplot() + 
  geom_line(data = Call_Payoff_Plot, aes(Call_x, Call_y, color = "Shares"), linetype = "solid") +
  geom_line(data = Call_Payoff_Plot, aes(Call_x, rep(0,length(Call_x)), color = "Breakeven"), linetype = "dashed") +
  geom_line(data = Call_Payoff_Plot, aes(x = Call_K + Call_Cost, 
                                         y = seq(from = -Call_Cost, to = x_max-Call_K, length=length(Call_x)), 
                                         color = "Breakeven"),
                                         linetype = "dashed") +
  scale_y_continuous(label = scales::dollar) +
  scale_x_continuous(label = scales::dollar) + 
  labs(title = "Payoff Of Apple's $205 Call On Expiry",
       x = "Stock Price",
       y = "Profit Per Share") +
  scale_color_manual(values = c('Shares'='white','Breakeven'='white','Breakeven'='white'),
                     labels = c("Profit Per Share",
                                paste0("Breakeven Price = ", currency(Call_K + Call_Cost)),
                                paste0("Breakeven Price = ", currency(Call_K + Call_Cost)) ),
                     guide = "legend") + 
  guides(color = guide_legend(override.aes = list(linetype = c("solid", "dashed")))) + 
  theme_classic() + 
  dark_mode() + 
  theme(plot.title = element_text(hjust = 0.5, face="bold",
                                  margin = margin(10, 0, 10, 0)),
        legend.justification=c(0,1), 
        legend.position=c(0,1), 
        legend.title = element_blank(),
        legend.key=element_rect(fill="black"),
        text = element_text(size=16), 
        panel.border = element_blank(), 
        panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(), 
        panel.background = element_blank(),
        axis.line = element_line(colour = "black"),
        axis.title.x = element_text(margin = unit(c(4, 0, 0, 0), "mm")),
        axis.title.y = element_text(margin = unit(c(0, 4, 0, 0), "mm"), 
                                    angle = 90)) 


# plot(x = Call_x, y = -option_cost + (Call_x > Call_K)*(Call_x-Call_K), 
#      type = 'l', lwd = 3,
#      xlab = "Apple's Stock Price", ylab = "Profit Per Share",
#      main = "Payoff Of The $145 Call Option On Expiry")
# abline(v = Call_K + option_cost, lty = 2, lwd = 1)
# abline(h = 0, lty = 2, lwd = 1)
# legend("topleft", c("Profit Per Share",
#                     paste0("Breakeven Price = $", Call_K + option_cost)),
#        lty = c("solid", "dotdash"), 
#        lwd = c(2, 2), cex = 0.75,
#        col=c("black", "black"), bty = "n") 
```

The `r currency(Apple_Prices_K[3])` strike call is similar. We've drawn the payoff diagram this time, and it gives the breakeven to be `r currency(Apple_Call_Costs[3] + Apple_Prices_K[3])` When shares are below `r currency(Apple_Prices_K[3])`, the call expires worthless and the buyer loses `r currency(100*Apple_Call_Costs[3])`. The call buyer still loses money when shares are at `r currency(Apple_Future_Prices[3])` because `r currency(Apple_Future_Prices[3])` is below this call's breakeven of `r currency(Apple_Call_Costs[3] + Apple_Prices_K[3])`. The call cost `r currency(Apple_Call_Costs[3] + Apple_Prices_K[3])`, but the buyer will have only made `r currency(Apple_Future_Prices[3])` - `r currency(Apple_Prices_K[3])` = `r currency(Apple_Future_Prices[3] - Apple_Prices_K[3])` per share (`r 100*currency(Apple_Future_Prices[3] - Apple_Prices_K[3])` per call) before paying for the call. This leaves him with a loss of `r 100*currency(Apple_Future_Prices[3] - Apple_Prices_K[3])` - `r currency(Apple_Call_Costs[3])` = `r 100*currency(Apple_Future_Prices[3] - Apple_Prices_K[3] - Apple_Call_Costs[3])` per share.

The `r currency(Apple_Prices_K[2])` strike call expires worthless if the shares are below `r currency(Apple_Prices_K[2])`, loses money when they are below the breakeven of `r currency(Apple_Prices_K[2])` + `r currency(Apple_Call_Costs[2])` = `r currency(Apple_Prices_K[2] + Apple_Call_Costs[2])`, and makes money when the shares are above `r currency(Apple_Prices_K[2] + Apple_Call_Costs[2])`. The `r currency(Apple_Prices_K[1])` strike call expires worthless when shares are below `r currency(Apple_Prices_K[1])`, loses money when the shares are below the breakeven of `r currency(Apple_Prices_K[1])` + `r currency(Apple_Call_Costs[1])` = `r currency(Apple_Prices_K[1] + Apple_Call_Costs[1])`, and makes money when they are above `r currency(Apple_Prices_K[1] + Apple_Call_Costs[1])`. The shareholder column is straightforward - their return is how much the stock moves by between September 11, 2019 and December 20, 2019. 

This table can give us even more useful insights. By comparing values across columns, we can see that the dollar returns of one `r currency(Apple_Prices_K[1])` strike call are always within \$100 dollars of the return from owning 100 shares. The dollar returns of the `r currency(Apple_Prices_K[2])` strike call are always within \$200 dollars of the return from owning 100 shares, except when the shares are priced at `r currency(Apple_Future_Prices[1])` (where the `r currency(Apple_Prices_K[2])` call loses significantly less money). The `r currency(Apple_Prices_K[3])` and `r currency(Apple_Prices_K[3])` strike calls have a different return profile than owning shares, essentally because their breakeven is higher. However, they have much lower maximum losses and achieve similar dollar returns after shares climb above their respective breakeven prices. 

To summarize, here are the main ideas that we want to be thinking about when we're looking at options with different strike prices.

1. The less money we spend on a call, the lower our maximum loss. In this table, the maximum loss happens when the shares are worth \$150 (on expiry).
2. The cheaper the calls are, the less money we lose in the worst case. When the shares are worth \$200, the calls lose a comparable amount of money as owning the shares.  
3. When the stock goes up, the call lets us participate in most of the upside (after making back the cost of the call). The calls get almost all of gains when the shares are worth \$300, and most of the gains when the shares are worth \$245.
4. If the shares do not go up by much, the call performs worse than owning shares because we cannot recover the cost of the call. This happens when the shares are at \$220, but the amount of money lost is relatively small.
5. If the shares do not go down by much, the call will also perform worse than owning shares because the cost of the call will be more than decline in the price of the shares.

This is the picture we get is we look at the table column-by-column. If we switch to looking at the table row-by-row, we can see how much of the gains or losses each call participated in, relative to someone who owns the shares. To make this easier, we'll look at a table of relative returns. 

``` {r Apple-Different-Strikes-Relative-Payoff, echo = FALSE}
Future_Prices <- c(150, 200, 220, 245, 300)
Current_Price <- 222.76
Future_Returns <-  Future_Prices - Current_Price

Apple_Different_Strikes_Call_Relative_Payoff <- tibble( "Share Price" = currency(Future_Prices),
                                          "100 Shares" = percent( sign(Future_Returns) ), 
                                          "1 $145 Strike Call" = percent( sign(Future_Returns) / Future_Returns * 
                                                                            ( pmax( 0, (Future_Prices - 145 ) ) - 78.45 ) ),
                                          "1 $180 Strike Call" = percent( sign(Future_Returns) / Future_Returns * 
                                                                            ( pmax( 0, (Future_Prices - 180 ) ) - 44.85 ) ),
                                          "1 $205 Strike Call" = percent( sign(Future_Returns) / Future_Returns * 
                                                                            ( pmax( 0, (Future_Prices - 205 ) ) - 23.63 ) ), 
                                          "1 $230 Strike Call" = percent( sign(Future_Returns) / Future_Returns * 
                                                                            ( pmax( 0, (Future_Prices - 230 ) ) - 8.50 ) ) )

kable_styling( knitr::kable(Apple_Different_Strikes_Call_Relative_Payoff, 
                            caption = "Relative Return if Held to Expiry"), 
               bootstrap_options = c("striped", "hover", "responsive"),
               full_width = FALSE )
```

The relative return table does an excellent job of capturing how much participation we get when there are extreme price movements (up or down). As we move across the \$150 row, the cheaper calls limit our downside. And in the \$245 and \$300 rows, they give good upside participation relative to owning 100 shares. The \$200 and \$220 rows are harder to interpret. The percentages are large, but we know from earlier that their dollar losses are small - they are still limited to the cost of the option. So while relative return tables are helpful, they can be difficult to understand without some sense of the magnitude of the dollar amounts. 

The next thing to notice is that the price of an option varies wildly depending on its strike price. To understand why, we can decompose the price of an option into two components - time value and intrinsic value. The intrinsic value of an option is how much money the buyer would make if they exercised the option today. With Apple trading at \$222.76, the \$205 call costs \$23.63 and the \$205 put costs \$5.45. If we exercised the call today, we would make \$222.76 - \$205 = \$17.76. This is the intrinsic value of the call. The remaining \$23.63 - \$17.76 = \$5.87 is the time value of the call. The put has no intrinstic value, because Apple's shares at \$222.76 are trading well above its strike price of \$205. This means the entire \$5.87 cost of the put is from its time value. 

The time value of an option slowly decays to \$0 as an option approaches expiry, leaving only its intrinsic value. This distinction between time value and instrinsic value helps explain the wide variation in options prices at expiry. If you're wondering about how to price options before their expiry date, we'll come back to that in much more detail later. There are lots of little details that obscure the big picture ideas we're trying to capture in this section. 

The most extreme differences are in the \$145 strike call and \$300 strike put. At the \$145 strike, the call is worth \$64.85 and the put is worth \$0.96. With Apple trading at \$222.76, the \$145 call has \$222.76 - \$145 = \$77.76 of intrinsic value and \$78.45 - \$77.76 = \$0.69 of time value. The \$145 put, in comparison, carries no intrinsic value and \$0.32 of time value. The takeaway here is that the seemingly large difference in cost between the \$145 calls and \$145 puts is due to their different intrinsic values, and that they have roughly the same amount of time value. 

To summarize time value and instrinsic value: 

1. Intrinsic value is how much money we would make if we exercised the option right now. It tends to move in the same direction as Apple's shares.
2. Time value is related to time to expiry. It gradually declines as the option gets closer to expiry. 
3. Decomposing option prices into time value and intrinsic value can help us understand their prices.

